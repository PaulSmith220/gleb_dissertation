<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <meta charset="UTF-8">
    <title>
        Надёжность электропривода
    </title>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <script type="text/javascript" src="js/utils.js"></script>
    <script type="text/javascript" src="js/params.js"></script>
    <script type="text/javascript" src="js/plot.js"></script>
    <script type="text/javascript" src="js/exec.js"></script>
    <script type="text/javascript" src="js/init.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/d3.js"></script>
</head>
<body onload="init()">
<div id="splashscreen"></div>
<div class="well" id="input_params">

</div><div></div>
<div class="well" id="w_tenzor_vector">
    <div class="title">
        Начальное значения вектора весов вершин
        <div>
            <table>
                <tr>
                    <td>
                        №
                    </td>
                    <td>
                        <input type="number" id="getWT" onchange="getWTbyNumber()" value="1"/>
                    </td>
                </tr>
                <tr>
                    <td>
                        #
                    </td>
                    <td>
                        <input type="number" id="setWT" onchange="setWTbyNumber()"/>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="data">

    </div>

</div>

<script>
    function getWTbyNumber() {
        var n = $("#getWT").val()*1 - 1,
                e = $("#w_tenzor_vector .data input[data-number=" + n + "]");
                v = e.val();
        $("#setWT").val(v);
    }

    function setWTbyNumber() {
        var n = $("#getWT").val()*1 - 1,
                e = $("#w_tenzor_vector .data input[data-number=" + n + "]");
        e.val($("#setWT").val());
    }
</script>
<div class="well" id="w_tenzor_vectorR2" style="vertical-align: top; margin-left: 10px;">
    <div class="title">
        Начальное значение тензора импульсного воздействия<br/>
        <table border="1" style="    border-spacing: 0; border-collapse: collapse;">
            <tr>
                <td>
                    J
                </td>
                <td>
                    K
                </td>
                <td>
                    Значение
                </td>
            </tr>
            <tr>
                <td>
                    <input type="number" id="w_tenzor_vectorR2_j" onchange="getWTR2byNumber()"/>
                </td>
                <td>
                    <input type="number" id="w_tenzor_vectorR2_k" onchange="getWTR2byNumber()"/>
                </td>
                <td>
                    <input type="number" id="w_tenzor_vectorR2_val" onchange="setWTR2byNumber()"/>
                </td>
            </tr>
        </table><br/>
        <a onclick="showFullTableR2()" href="#">Показать тензор</a>
    </div>
    <div class="data">

    </div>

</div>

<script>
    function getWTR2byNumber() {
        var j = $("#w_tenzor_vectorR2_j").val(),
                k = $("#w_tenzor_vectorR2_k").val();
        j = j*1 - 1;
        k = k*1 - 1;
        var v;
        if (dataSet.w_tenzor_vectorR2[k] == undefined || dataSet.w_tenzor_vectorR2[k][j] == undefined) {
            v = 0;
        } else {
            v = dataSet.w_tenzor_vectorR2[k][j];
        }
        console.log(j, k, dataSet.w_tenzor_vectorR2[k]);
        $("#w_tenzor_vectorR2_val").val(v);
    }

    function setWTR2byNumber() {
        var j = $("#w_tenzor_vectorR2_j").val(),
                k = $("#w_tenzor_vectorR2_k").val();
        j = j*1 - 1;
        k = k*1 - 1;
        if (dataSet.w_tenzor_vectorR2[k] == undefined) {
            dataSet.w_tenzor_vectorR2[k] = [];
        }
        dataSet.w_tenzor_vectorR2[k][j] = parseFloat($("#w_tenzor_vectorR2_val").val());
    }

    function showFullTableR2() {
        var w = window.open();
        var j_max = $("#graphVerticesAmount").val();
        var k_max = $("#systemCount").val();
        var table = "<table border='1' style='border-collapse: collapse;' cellpadding='5'>";
        console.log(j_max, k_max);

            for (var k = 0; k < k_max; k++) {
                table += "<tr>";
                if (dataSet.w_tenzor_vectorR2[k] == undefined) {
                    dataSet.w_tenzor_vectorR2[k] = [];
                }

                for (var j = 0; j < j_max; j++) {
                    if (dataSet.w_tenzor_vectorR2[k][j] == undefined) {
                        dataSet.w_tenzor_vectorR2[k][j] = 0;
                    }
                    table += "<td>" + dataSet.w_tenzor_vectorR2[k][j] + "</td>";
                }

                table += "</tr>";
            }

        w.document.write(table);
    }
</script>

<div></div>
<div class="well">
  <div class="btn" id="execute" onclick="execute()">Рассчитать</div>
</div><div></div>
<div class="well" id="output_params">

</div><div></div>
</body>
<script id="number_template" type="text/plain">
	<label>
			{{title}}
			<input type="number" id="{{id}}" placeholder="0.00" value="{{value}}"/>
			{{unit}}
		</label>
</script>
<script id="number_output" type="text/plain">
	<label>
			{{title}}: 
			<span id={{id}}>{{value}}</span>
	</label>
</script>
</html>